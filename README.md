[![XKCD Search service CI](https://github.com/alexey0b/xkcd-search-service/actions/workflows/ci.yaml/badge.svg)](https://github.com/alexey0b/xkcd-search-service/actions/workflows/ci.yaml)
[![Coverage Status](https://coveralls.io/repos/github/alexey0b/xkcd-search-service/badge.svg?branch=main)](https://coveralls.io/github/alexey0b/xkcd-search-service?branch=main)

# XKCD Comics Search Service

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∫–æ–º–∏–∫—Å–æ–≤ [XKCD](https://xkcd.com/). –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –∫–æ–º–∏–∫—Å–æ–≤ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- üîç **–ü–æ–∏—Å–∫ –∫–æ–º–∏–∫—Å–æ–≤** –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- üñºÔ∏è **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** —Å –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- üîê **JWT-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∏–∫—Å–æ–≤, —Å–ª–æ–≤, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î** - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤ –∏–∑ XKCD API
- üóëÔ∏è **–û—á–∏—Å—Ç–∫–∞ –ë–î** - –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ça

### Docker Compose

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make up

# –î–æ—Å—Ç—É–ø
http://localhost:23000
```

### Kubernetes (Minikube)

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Minikube —Å CNI
make k8s-init

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make k8s-start

# Port-forward –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
make k8s-port-forward

# –î–æ—Å—Ç—É–ø
http://kubernetes.docker.internal:3000
```

---

## –ö–æ–º–∞–Ω–¥—ã Makefile

### Docker Compose

| –ö–æ–º–∞–Ω–¥–∞             | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------------- | ------------------------------ |
| `make build-images` | –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã          |
| `make up`           | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã          |
| `make down`         | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã             |
| `make clean`        | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å volumes   |
| `make test`         | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |

### Kubernetes

| –ö–æ–º–∞–Ω–¥–∞                 | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| ----------------------- | ------------------------------- |
| `make k8s-init`         | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Minikube —Å CNI |
| `make k8s-start`        | –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ K8s     |
| `make k8s-delete`       | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã             |
| `make k8s-restart`      | –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã         |
| `make k8s-port-forward` | –ü—Ä–æ–±—Ä–æ—Å–∏—Ç—å –ø–æ—Ä—Ç Ingress         |
| `make k8s-dashboard`    | –û—Ç–∫—Ä—ã—Ç—å Kubernetes Dashboard    |
| `make k8s-stop`         | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Minikube             |
| `make k8s-clean`        | –£–¥–∞–ª–∏—Ç—å Minikube –∫–ª–∞—Å—Ç–µ—Ä        |

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

| –ö–æ–º–∞–Ω–¥–∞         | –û–ø–∏—Å–∞–Ω–∏–µ              |
| --------------- | --------------------- |
| `make lint`     | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã     |
| `make cover`    | –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏ |
| `make security` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ö–æ–º–∞–Ω–¥–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                  |
| ------------------------ | ------------------------- |
| `make unit-tests`        | –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤        |
| `make integration-tests` | –ó–∞–ø—É—Å–∫ integration —Ç–µ—Å—Ç–æ–≤ |

---

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

üé• ![–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è](docs/demo.gif)

### –°–∫—Ä–∏–Ω—à–æ—Ç—ã

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞**

![–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](docs/screenshots/admin-login.png)

- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**

![–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ](docs/screenshots/admin-panel.png)

- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞**

![–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞](docs/screenshots/search-page.png)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

> **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:** Hexagonal Architecture (Ports & Adapters)

```
xkcd-search-service/
‚îú‚îÄ‚îÄ search-services/          # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (Go)
‚îÇ   ‚îú‚îÄ‚îÄ frontend/             # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (SSR, JWT, embedded files)
‚îÇ   ‚îú‚îÄ‚îÄ api/                  # API Gateway (REST ‚Üí gRPC)
‚îÇ   ‚îú‚îÄ‚îÄ search/               # –ü–æ–∏—Å–∫ (PostgreSQL, NATS subscriber)
‚îÇ   ‚îú‚îÄ‚îÄ update/               # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (XKCD API, NATS publisher)
‚îÇ   ‚îú‚îÄ‚îÄ words/                # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (—Å—Ç–µ–º–º–∏–Ω–≥ Snowball)
‚îÇ   ‚îî‚îÄ‚îÄ proto/                # gRPC Protocol Buffers
‚îú‚îÄ‚îÄ k8s/                      # Kubernetes (namespace, configs, deployments, services, ingress)
‚îú‚îÄ‚îÄ tests/                    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (testcontainers)
‚îú‚îÄ‚îÄ docs/         			  # –§–∞–π–ª—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ compose.yaml              # Docker Compose
‚îî‚îÄ‚îÄ Makefile                  # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
```

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

- **Frontend** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å HTML-—à–∞–±–ª–æ–Ω–∞–º–∏, JWT-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- **API** - –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend-—Å–µ—Ä–≤–∏—Å–∞–º
- **Search** - —Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **Update** - —Å–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤
- **Words** - —Å–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–ª–æ–≤
- **PostgreSQL** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
- **NATS** - –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Å–æ–±—ã—Ç–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Go 1.25+
- **Frontend**: HTML, CSS, JavaScript
- **Database**: PostgreSQL 17
- **Message Broker**: NATS
- **Orchestration**: Docker, Kubernetes

**–û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**

- [golang-jwt/jwt](https://github.com/golang-jwt/jwt) - JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- [lib/pq](https://github.com/lib/pq) - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- [jackc/pgx](https://github.com/jackc/pgx) - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä –∏ toolkit
- [nats-io/nats.go](https://github.com/nats-io/nats.go) - NATS –∫–ª–∏–µ–Ω—Ç
- [jmoiron/sqlx](https://github.com/jmoiron/sqlx) - SQL —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- [golang-migrate/migrate](https://github.com/golang-migrate/migrate) - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- [kljensen/snowball](https://github.com/kljensen/snowball) - —Å—Ç–µ–º–º–∏–Ω–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞
- [grpc/grpc-go](https://github.com/grpc/grpc-go) - gRPC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [testcontainers-go](https://github.com/testcontainers/testcontainers-go) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
